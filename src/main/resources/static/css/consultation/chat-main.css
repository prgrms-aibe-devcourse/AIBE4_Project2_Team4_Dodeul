/* 1. 전체 레이아웃 (높이 고정 및 Flex) */
.chat-main-row {
  display: flex;
  height: 800px; /* 필요에 따라 height: calc(100vh - 150px); 등으로 조정 가능 */
  align-items: stretch;
}

.chat-container {
  height: 100% !important;
  display: flex;
  flex-direction: column;
  background-color: #fff;
  /* 테두리와 둥근 모서리는 부트스트랩 클래스(rounded-4 등)로 제어되지만, 여기서 보강 가능 */
}

/* 2. 채팅 헤더 (나가기 버튼 우측 정렬) */
.chat-header {
  display: flex;
  justify-content: space-between; /* 양 끝으로 배치 */
  align-items: center;
  padding: 15px 20px;
  border-bottom: 1px solid #f1f3f5;
  background-color: #fff;
}

/* 3. 메시지 영역 (스크롤) */
.chat-messages {
  flex: 1;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  padding: 20px;
  background-color: #f8f9fa; /* 배경색을 연하게 주어 말풍선 강조 */
  gap: 10px; /* 메시지 간 간격 */
}

/* 4. 말풍선 공통 스타일 */
.message {
  max-width: 70%;
  padding: 10px 15px;
  border-radius: 15px;
  position: relative;
  word-wrap: break-word;
  font-size: 0.95rem;
  line-height: 1.5;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
}

/* 이미지는 말풍선 패딩 없이 꽉 차게 */
.message img {
  display: block;
  max-width: 100%;
  border-radius: 12px;
  margin-bottom: 5px;
}

/* 4-1. 내가 보낸 메시지 (Sent) - 우측, 검정 배경 */
.align-items-end {
  align-items: flex-end;
}

.message.sent {
  background-color: #212529; /* 짙은 검정/회색 */
  color: #fff;
  border-bottom-right-radius: 2px; /* 말풍선 꼬리 느낌 */
  text-align: left; /* 텍스트는 좌측 정렬 */
}

.message.sent a {
  color: #fff; /* 링크 색상 흰색으로 */
}

.message.sent .text-muted {
  color: rgba(255, 255, 255, 0.7) !important; /* 파일명 등 보조 텍스트 연한 흰색 */
}

/* 4-2. 상대방 메시지 (Received) - 좌측, 흰색/회색 배경 */
.align-items-start {
  align-items: flex-start;
}

.message.received {
  background-color: #fff;
  color: #212529;
  border: 1px solid #e9ecef;
  border-bottom-left-radius: 2px;
}

/* 5. 입력창 영역 (하단 고정) */
.chat-input-area {
  padding: 15px 20px;
  background-color: #fff;
  border-top: 1px solid #f1f3f5;
  display: flex;
  align-items: flex-end; /* 입력창이 늘어나도 버튼은 하단 정렬 */
  gap: 10px;
}

/* 입력창 스타일 커스텀 */
.chat-input {
  flex: 1;
  border: 1px solid #dee2e6;
  border-radius: 20px;
  padding: 10px 15px;
  background-color: #f8f9fa;
  resize: none;
  outline: none;
  font-size: 0.95rem;
  line-height: 1.5;
  transition: border-color 0.2s, background-color 0.2s;
  max-height: 100px; /* 너무 길어지면 내부 스크롤 */
}

.chat-input:focus {
  border-color: #212529; /* 포커스 시 테두리 진하게 */
  background-color: #fff;
}

/* 버튼 스타일 */
#file-trigger-btn {
  border-radius: 50%;
  width: 40px;
  height: 40px;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 1px solid #dee2e6;
  color: #495057;
}

#file-trigger-btn:hover {
  background-color: #e9ecef;
}

#send-btn {
  border-radius: 20px;
  padding: 8px 20px;
  font-weight: 600;
  height: 42px; /* 입력창 높이와 비슷하게 */
}

/* 로딩 애니메이션 및 스크롤바 */
.upload-loading {
  opacity: 0.7;
}

.chat-messages::-webkit-scrollbar {
  width: 6px;
}

.chat-messages::-webkit-scrollbar-thumb {
  background-color: #ced4da;
  border-radius: 10px;
}
