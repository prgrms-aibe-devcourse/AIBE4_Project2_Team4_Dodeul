<!-- src/main/resources/templates/board/post-comment.html -->
<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<body>
<!--
  ì´ íŒŒì¼ì€ ì°¸ê³ ìš© ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤.
  ì‹¤ì œ ëŒ“ê¸€ ë Œë”ë§ì€ post-detail.htmlì—ì„œ Thymeleaf SSRë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
-->
<section class="card card--soft" th:fragment="postCommentSection">
  <header class="card__header card__header--compact">
    <h2 class="subtitle">
      <span class="subtitle__icon">ğŸ’¬</span>
      <span>ë‹µë³€</span>
      <span th:text="${comments.size()}" class="subtitle__count">0</span>
      <span class="subtitle__suffix">ê°œ</span>
    </h2>
  </header>

  <!-- ëŒ“ê¸€ ì‘ì„± -->
  <div th:if="${isAuthenticated}" class="composer">
    <textarea
      id="commentContent"
      class="composer__input"
      placeholder="ë‹µë³€ì„ ì‘ì„±í•˜ì„¸ìš”..."
    ></textarea>
    <div class="composer__actions">
      <button id="commentSubmitBtn" class="btn btn--primary" type="button">ë‹µë³€ ì‘ì„±</button>
    </div>
  </div>

  <!-- ëŒ“ê¸€ ëª©ë¡ (ì„œë²„ ë Œë”ë§) -->
  <div class="comment-list">
    <div
      th:each="comment : ${comments}"
      class="comment"
      th:classappend="${comment.accepted ? 'comment--accepted' : ''}"
    >
      <div class="comment__head">
        <div class="comment__left">
          <div class="comment__avatar" th:text="${#strings.substring(comment.authorDisplayName, 0, 1).toUpperCase()}">
            A
          </div>
          <div class="comment__meta">
            <div class="comment__topline">
              <span class="comment__name" th:text="${comment.authorDisplayName}">ìµëª…</span>

              <!-- ì—­í•  íƒœê·¸ ìƒ‰ìƒ êµ¬ë¶„ -->
              <span
                th:if="${comment.authorRoleTag == 'ì‘ì„±ì'}"
                class="comment__role"
                style="background:#eff6ff;color:#2563eb;border-color:rgba(37,99,235,0.2)"
              >ì‘ì„±ì</span>
              <span
                th:if="${comment.authorRoleTag == 'ë©˜í† '}"
                class="comment__role"
                style="background:#ecfdf5;color:#16a34a;border-color:rgba(22,163,74,0.18)"
              >ë©˜í† </span>
              <span
                th:if="${comment.authorRoleTag == 'ë©˜í‹°'}"
                class="comment__role"
                style="background:#fef2f2;color:#ef4444;border-color:rgba(239,68,68,0.18)"
              >ë©˜í‹°</span>

              <span class="comment__time"
                    th:text="${#temporals.format(comment.createdAt, 'yyyy-MM-dd HH:mm')}">ë°©ê¸ˆ ì „</span>
            </div>
            <div class="comment__badges" th:if="${comment.accepted}">
              <span class="comment__badge comment__badge--accepted">âœ“ ì±„íƒë¨</span>
            </div>
          </div>
        </div>
        <div class="comment__right">
          <!-- ì±„íƒ ë²„íŠ¼ -->
          <button
            th:if="${comment.canAccept}"
            class="btn btn--accept"
          >ì±„íƒí•˜ê¸°
          </button>

          <!-- ëŒ“ê¸€ ì¢‹ì•„ìš” ë²„íŠ¼ -->
          <button
            th:if="${isAuthenticated}"
            class="comment__iconBtn"
            th:classappend="${comment.likedByMe ? 'iconbtn--active' : ''}"
          >
            <span class="comment__icon" th:text="${comment.likedByMe ? 'â¤ï¸' : 'ğŸ¤'}">ğŸ¤</span>
            <span class="comment__iconCount" th:text="${comment.likeCount}">0</span>
          </button>
        </div>
      </div>
      <div class="comment__body" th:text="${comment.content}">ëŒ“ê¸€ ë‚´ìš©</div>
    </div>
  </div>

  <div th:if="${comments.isEmpty()}" class="comment-placeholder">
    ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.
  </div>
</section>

<style>
  /* ì—­í•  íƒœê·¸ ìƒ‰ìƒ ì •ì˜ */
  .comment__role--author {
    background: #eff6ff !important;
    color: #2563eb !important;
    border-color: rgba(37, 99, 235, 0.2) !important;
  }

  .comment__role--mentor {
    background: #ecfdf5 !important;
    color: #16a34a !important;
    border-color: rgba(22, 163, 74, 0.18) !important;
  }

  .comment__role--mentee {
    background: #fef2f2 !important;
    color: #ef4444 !important;
    border-color: rgba(239, 68, 68, 0.18) !important;
  }
</style>
</body>
</html>
