<!DOCTYPE html>
<html lang="ko"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{common/layout/base}">

<head>
  <title>DODEUL | 홈</title>
</head>

<body>
<section layout:fragment="content">
  <div class="container" style="padding: 48px 0;">
    <h1 style="font-size: 2rem; font-weight: 800; margin-bottom: 12px;">
      성장으로 이끄는 최고의 멘토를 만나보세요.
    </h1>

    <p style="color: #666; line-height: 1.6; margin-bottom: 20px;">
      닉네임 온보딩 완료 후 이 페이지로 이동합니다. (임시 홈)
    </p>

    <div style="display: flex; gap: 12px; flex-wrap: wrap;">
      <button type="button" class="btn-primary-custom" onclick="checkAvailability()">
        상담 신청하기
      </button>
    </div>

  </div>
</section>

<th:block layout:fragment="script">
  <script>
    // 매칭 가능 여부 확인 후 상담신청서 작성 페이지로 리다이렉트
    function checkAvailability() {
      fetch(`/api/matchings/availability`)
        .then(response => response.json())
        .then(data => {
          if (data.code >= 200 && data.code < 300) {
            location.href = `/consulting-applications/form`;
          } else {
            showCommonModal(data.message || '현재 상담 신청이 불가능합니다.');
          }
        })
        .catch(err => {
          console.error(err);
          showCommonModal('서버 통신 중 오류가 발생했습니다.');
        });
    }
  </script>
</th:block>
</body>
</html>
<!--// 106번 재커밋-->
